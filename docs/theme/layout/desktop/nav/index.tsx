import { useNavigate, useLocation } from 'react-router-dom';
import { useSnapshot } from 'valtio';
import store, { dispatch } from '../../../store';
import useStyles from '../style';
import { Input, Dropdown } from 'shineout';

const Nav = () => {
  const classes = useStyles();
  const navigate = useNavigate();
  const state = useSnapshot(store);
  const location = useLocation();

  const navs = [
    // {
    //   title: 'Home',
    //   path: `/${state.locales}/home`,
    // },
    // {
    //   title: 'Design',
    //   path: `/${state.locales}/design`,
    // },
    // {
    //   title: 'Introduce',
    //   path: `/${state.locales}/introduce`,
    // },
    {
      title: 'Component',
      path: `/${state.locales}/component/${state.doc}`,
    },
    // {
    //   title: 'Changelog',
    //   path: `/${state.locales}/changelog`,
    // },
  ];

  const handleChangeLocales = () => {
    const nextLocales = state.locales === 'en' ? 'cn' : 'en';

    dispatch.setLocales(nextLocales);

    const nextPath = location.pathname.replace(`/${state.locales}/`, `/${nextLocales}/`);

    navigate(nextPath);
  };

  const renderLeftNav = () => {
    return (
      <svg
        width='24'
        height='24'
        viewBox='0 0 24 24'
        fill='none'
        xmlns='http://www.w3.org/2000/svg'
      >
        <path
          d='M6 4C6 5.10457 5.10457 6 4 6C2.89543 6 2 5.10457 2 4C2 2.89543 2.89543 2 4 2C5.10457 2 6 2.89543 6 4Z'
          fill='#999DA8'
        />
        <path
          d='M6 12C6 13.1046 5.10457 14 4 14C2.89543 14 2 13.1046 2 12C2 10.8954 2.89543 10 4 10C5.10457 10 6 10.8954 6 12Z'
          fill='#999DA8'
        />
        <path
          d='M6 20C6 21.1046 5.10457 22 4 22C2.89543 22 2 21.1046 2 20C2 18.8954 2.89543 18 4 18C5.10457 18 6 18.8954 6 20Z'
          fill='#999DA8'
        />
        <path
          d='M14 4C14 5.10457 13.1046 6 12 6C10.8954 6 10 5.10457 10 4C10 2.89543 10.8954 2 12 2C13.1046 2 14 2.89543 14 4Z'
          fill='#999DA8'
        />
        <path
          d='M14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z'
          fill='#999DA8'
        />
        <path
          d='M14 20C14 21.1046 13.1046 22 12 22C10.8954 22 10 21.1046 10 20C10 18.8954 10.8954 18 12 18C13.1046 18 14 18.8954 14 20Z'
          fill='#999DA8'
        />
        <path
          d='M22 4C22 5.10457 21.1046 6 20 6C18.8954 6 18 5.10457 18 4C18 2.89543 18.8954 2 20 2C21.1046 2 22 2.89543 22 4Z'
          fill='#999DA8'
        />
        <path
          d='M22 12C22 13.1046 21.1046 14 20 14C18.8954 14 18 13.1046 18 12C18 10.8954 18.8954 10 20 10C21.1046 10 22 10.8954 22 12Z'
          fill='#999DA8'
        />
        <path
          d='M22 20C22 21.1046 21.1046 22 20 22C18.8954 22 18 21.1046 18 20C18 18.8954 18.8954 18 20 18C21.1046 18 22 18.8954 22 20Z'
          fill='#999DA8'
        />
      </svg>
    );
  };

  // const renderRightNav = () => {};

  // const handleChangeEnv = () => {
  //   dispatch.setEnv(state.env === 'SHEIN' ? 'GitHub' : 'SHEIN');
  // };

  const renderPrefix = () => {
    return (
      <svg
        style={{ marginLeft: 8 }}
        width='14'
        height='14'
        viewBox='0 0 14 14'
        fill='none'
        xmlns='http://www.w3.org/2000/svg'
      >
        <g clipPath='url(#clip0_193_361)'>
          <path
            d='M2.87521 2.63359C0.824961 4.68384 0.824961 8.00796 2.87521 10.0582C4.78609 11.9691 7.80351 12.099 9.86484 10.4479L11.7081 12.2915C11.9359 12.5193 12.3053 12.5193 12.5331 12.2915C12.7609 12.0637 12.7609 11.6943 12.5331 11.4665L10.6899 9.62276C12.3406 7.56144 12.2106 4.54432 10.2998 2.63359C8.24958 0.583338 4.92547 0.583338 2.87521 2.63359ZM3.70017 3.45855C5.29481 1.86391 7.88024 1.86391 9.47488 3.45855C11.0695 5.05319 11.0695 7.63861 9.47488 9.23325C7.88024 10.8279 5.29481 10.8279 3.70017 9.23325C2.10553 7.63861 2.10553 5.05319 3.70017 3.45855Z'
            fill='#B3B7C1'
          />
        </g>
        <defs>
          <clipPath id='clip0_193_361'>
            <rect width='14' height='14' fill='white' />
          </clipPath>
        </defs>
      </svg>
    );
  };

  const renderAvatar = () => {
    return (
      <div style={{ height: 32, width: 32, borderRadius: '50%', background: '#F4F5F8' }}></div>
    );
  };

  return (
    <div className={classes.nav}>
      <div className='left-nav'>{renderLeftNav()}</div>
      <ul className='entry'>
        <li>
          <Input
            placeholder='搜索...'
            prefix={renderPrefix()}
            border={false}
            style={{ backgroundColor: '#F4F5F8', width: 280 }}
          ></Input>
        </li>
        <li style={{ padding: '0 12px' }}>
          <Dropdown placeholder={<span style={{ color: '#141737' }}>RTL</span>} data={[]} />
        </li>
        <li style={{ paddingRight: 24 }} onClick={handleChangeLocales}>
          <svg
            width='20'
            height='20'
            viewBox='0 0 20 20'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              fillRule='evenodd'
              clipRule='evenodd'
              d='M16.6667 10H6.66667C6.20643 10 5.83333 10.3731 5.83333 10.8333V17.5C5.83333 17.9602 6.20643 18.3333 6.66667 18.3333H16.6667C17.1269 18.3333 17.5 17.9602 17.5 17.5V10.8333C17.5 10.3731 17.1269 10 16.6667 10ZM6.66667 9.16667C5.74619 9.16667 5 9.91286 5 10.8333V17.5C5 18.4205 5.74619 19.1667 6.66667 19.1667H16.6667C17.5871 19.1667 18.3333 18.4205 18.3333 17.5V10.8333C18.3333 9.91286 17.5871 9.16667 16.6667 9.16667H6.66667Z'
              fill='#333E59'
            />
            <path
              d='M7.25 10.7167H11.525V11.4917H8.15833V13.225H11.325V14H8.15833V15.8917H11.6667V16.6667H7.25V10.7167Z'
              fill='#333E59'
            />
            <path
              d='M14.6885 12.2417C15.7552 12.2417 16.2969 12.825 16.2969 14.0083V16.6667H15.4135V14.0833C15.4135 13.35 15.0719 12.9833 14.4052 12.9833C14.1552 12.9833 13.9302 13.0667 13.7469 13.25C13.5469 13.45 13.4219 13.725 13.3885 14.075V16.6667H12.5052V12.3583H13.3885V12.8917C13.5552 12.675 13.7469 12.5167 13.9635 12.4083C14.1802 12.2917 14.4219 12.2417 14.6885 12.2417Z'
              fill='#333E59'
            />
            <rect x='1.66669' y='1.66667' width='11.6667' height='11.6667' rx='2' fill='#333E59' />
            <path
              d='M7.01002 2.59334H7.99002V4.32334H11.55V9.15334H10.6V8.58334H7.99002V11.9333H7.01002V8.58334H4.41002V9.15334H3.46002V4.32334H7.01002V2.59334ZM4.41002 7.65334H7.01002V5.25334H4.41002V7.65334ZM7.99002 7.65334H10.6V5.25334H7.99002V7.65334Z'
              fill='white'
            />
          </svg>
        </li>
        <li style={{ paddingRight: 24 }}>
          <svg
            width='20'
            height='20'
            viewBox='0 0 20 20'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              d='M9.99219 1.49024C5.16211 1.48828 1.25 5.39844 1.25 10.2246C1.25 14.041 3.69727 17.2852 7.10547 18.4766C7.56445 18.5918 7.49414 18.2656 7.49414 18.043V16.5293C4.84375 16.8398 4.73633 15.0859 4.55859 14.793C4.19922 14.1797 3.34961 14.0234 3.60352 13.7305C4.20703 13.4199 4.82227 13.8086 5.53516 14.8613C6.05078 15.625 7.05664 15.4961 7.56641 15.3691C7.67773 14.9102 7.91602 14.5 8.24414 14.1816C5.49805 13.6895 4.35352 12.0137 4.35352 10.0215C4.35352 9.05469 4.67188 8.16602 5.29688 7.44922C4.89844 6.26758 5.33398 5.25586 5.39258 5.10547C6.52734 5.00391 7.70703 5.91797 7.79883 5.99024C8.44336 5.81641 9.17969 5.72461 10.0039 5.72461C10.832 5.72461 11.5703 5.82031 12.2207 5.99609C12.4414 5.82813 13.5352 5.04297 14.5898 5.13867C14.6465 5.28906 15.0723 6.27734 14.6973 7.44336C15.3301 8.16211 15.6523 9.0586 15.6523 10.0273C15.6523 12.0234 14.5 13.7012 11.7461 14.1855C12.2051 14.6387 12.4902 15.2676 12.4902 15.9629V18.1602C12.5059 18.3359 12.4902 18.5098 12.7832 18.5098C16.2422 17.3438 18.7324 14.0762 18.7324 10.2266C18.7324 5.39844 14.8184 1.49024 9.99219 1.49024Z'
              fill='#333E59'
            />
          </svg>
        </li>
        <li style={{ paddingRight: 24 }}>
          <svg
            width='20'
            height='20'
            viewBox='0 0 20 20'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              d='M11.25 17.5C11.471 17.5 11.6829 17.5878 11.8392 17.7441C11.9954 17.9004 12.0832 18.1123 12.0832 18.3333C12.0832 18.5543 11.9954 18.7663 11.8392 18.9225C11.6829 19.0788 11.471 19.1666 11.25 19.1667H8.75C8.52901 19.1666 8.31708 19.0788 8.16083 18.9225C8.00457 18.7663 7.91679 18.5543 7.91679 18.3333C7.91679 18.1123 8.00457 17.9004 8.16083 17.7441C8.31708 17.5878 8.52901 17.5 8.75 17.5H11.25ZM10.0017 0.833328C10.2227 0.833328 10.4346 0.921126 10.5909 1.07741C10.7472 1.23369 10.835 1.44565 10.835 1.66666V2.49999L10.8317 2.55833C12.2204 2.75872 13.4904 3.45282 14.409 4.51345C15.3276 5.57408 15.8333 6.9302 15.8333 8.33333V14.1667H16.6667C16.8877 14.1667 17.0996 14.2545 17.2559 14.4107C17.4122 14.567 17.5 14.779 17.5 15C17.5 15.221 17.4122 15.433 17.2559 15.5892C17.0996 15.7455 16.8877 15.8333 16.6667 15.8333H3.33333C3.11232 15.8333 2.90036 15.7455 2.74408 15.5892C2.5878 15.433 2.5 15.221 2.5 15C2.5 14.779 2.5878 14.567 2.74408 14.4107C2.90036 14.2545 3.11232 14.1667 3.33333 14.1667H4.16667V8.33333C4.1668 6.92983 4.6728 5.5734 5.59191 4.51272C6.51101 3.45203 7.78164 2.75817 9.17083 2.55833C9.16895 2.53894 9.16812 2.51947 9.16833 2.49999V1.66666C9.16833 1.44565 9.25613 1.23369 9.41241 1.07741C9.56869 0.921126 9.78065 0.833328 10.0017 0.833328ZM10 4.16666C8.92628 4.16672 7.89403 4.58128 7.11852 5.32388C6.34301 6.06648 5.8841 7.07979 5.8375 8.15249L5.83333 8.33333V14.1667H14.1667V8.33333C14.1666 7.25961 13.752 6.22736 13.0095 5.45185C12.2669 4.67633 11.2535 4.21743 10.1808 4.17083L10 4.16666Z'
              fill='#333E59'
            />
          </svg>
        </li>
        {navs.map((nav) => (
          <li key={nav.title} onClick={() => navigate(nav.path)}>
            {nav.title === 'Component' ? renderAvatar() : ''}
          </li>
        ))}
        {/* <li onClick={handleChangeEnv}>{state.env}</li> */}
      </ul>
    </div>
  );
};

export default Nav;
