## 问题描述

修复 `Popover` 在滚动容器中的极限边界场景下不可见的问题。

当 Popover 的触发元素位于一个具有横向滚动的容器中，且该容器已滚动到一定位置时，Popover 弹出层的定位计算未考虑到容器的滚动偏移量，导致弹出层位置计算错误，可能出现在视口之外而不可见的情况。

## 修复方案

在计算 Popover 弹出层位置时，增加对最近滚动容器的横向滚动偏移量（scrollLeft）的考虑，确保弹出层能够正确定位在触发元素附近。

## 变更内容

### 新增工具函数

在 `packages/hooks/src/utils/dom/element.tsx` 中新增 `getClosestScrollContainer` 函数，用于查找元素最近的可滚动祖先容器：

```typescript
export function getClosestScrollContainer(element: HTMLElement | null) {
  if (!element) {
    return null;
  }

  // 检查元素是否可滚动
  const isScrollable = (el: HTMLElement) => {
    const style = window.getComputedStyle(el);
    const overflowX = style.overflowX;
    const overflowY = style.overflowY;
    return (overflowX === 'auto' || overflowX === 'scroll' ||
            overflowY === 'auto' || overflowY === 'scroll') &&
           (el.scrollHeight > el.clientHeight || el.scrollWidth > el.clientWidth);
  };

  // 如果元素本身是可滚动的，直接返回
  if (isScrollable(element)) {
    return element;
  }

  // 遍历父元素
  let parent = element.parentElement;
  while (parent) {
    if (isScrollable(parent)) {
      return parent;
    }
    parent = parent.parentElement;
  }

  // 如果没有找到可滚动的祖先，返回 body 或 documentElement
  return document.scrollingElement || document.documentElement;
}
```

### 修改位置计算逻辑

在 `packages/hooks/src/common/use-position-style/index.ts` 中修改 `getStyle` 函数，在计算左侧定位时加入滚动偏移量：

```typescript
// 获取最近的滚动容器
const closestScrollContainer = getClosestScrollContainer(parentElRef.current);

// 在计算 left 位置时加入滚动偏移量
if (h === 'left') {
  style.left = rect.left - containerRect.left + containerScroll.left + (closestScrollContainer?.scrollLeft || 0);
  // ... 其他代码
}
```

### 优化弹出层闪烁问题

在 `packages/hooks/src/components/use-popup/use-popup.ts` 中移除了 `updatePosition` 函数中的 `setTimeout`，避免异步更新导致的闪烁：

```typescript
// 之前
setTimeout(() => {
  const newPosition = getPosition(
    targetRef.current,
    props.priorityDirection,
    autoMode,
    popupRef.current || undefined,
  );
  if (newPosition !== position) setPositionState(newPosition);
}, 10);

// 之后
const newPosition = getPosition(
  targetRef.current,
  props.priorityDirection,
  autoMode,
  popupRef.current || undefined,
);
if (newPosition !== position) setPositionState(newPosition);
```

## 影响范围

此修复主要影响以下场景：

1. **横向滚动容器场景**：当 Popover 的触发元素位于具有横向滚动的容器中时，现在能够正确计算弹出层位置
2. **嵌套滚动容器**：支持多层嵌套的滚动容器，会找到最近的可滚动祖先元素
3. **性能优化**：移除了不必要的异步延迟，提升了弹出层显示的响应速度，减少闪烁

## 测试建议

1. 在具有横向滚动的容器中测试 Popover，确保滚动到不同位置时弹出层都能正确显示
2. 测试嵌套滚动容器的场景
3. 验证弹出层显示时不再有闪烁问题
4. 确保修改不影响其他定位场景（如固定定位、垂直滚动等）