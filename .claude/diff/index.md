# Diff 报告通用模板

## 文档结构

### 1. 标题
格式：`# [组件名] 组件 [版本号] 版本 Diff 报告`

### 2. 版本信息
```markdown
## 版本信息
- 正式版本: [版本号]
- 包含 Beta 版本: [版本号]-beta.1 ~ [版本号]-beta.n
- 发布日期: [YYYY-MM-DD]
```

### 3. 详细变更
```markdown
## 详细变更

### [版本号]-beta.n
- **变更类型**: [修复问题/新增功能/性能优化/样式调整/重构/文档更新]
- **变更标签**: [功能/传参/样式/布局/时机/数据/逻辑/性能/交互/行为]
- **复现示例**: [https://shineout-playground.sheincorp.cn/#/playground?code=短链接 或 无]
- **变更描述**: [具体描述变更内容]
- **PR**: [#PR编号](GitHub PR链接) [如有]
- **影响组件**: [受影响的组件列表]
- **问题原因**: [如果是修复问题，说明根本原因；样式调整可省略]
```

### 4. Bug 特征分析（仅修复问题类）
```markdown
#### Bug 特征
- [问题的具体表现、错误信息等]
- [触发问题的条件组合]
- [受影响的功能或行为]

**代码模式**：
```jsx
// 容易出现问题的代码结构
<Select
  属性组合  // 突出导致问题的属性
  ...
/>
```

#### 排查规则
- 搜索[特定属性组合]的[组件名]组件
- 搜索在[特定场景]中使用的[组件名]
- 搜索[具体代码模式]
```

### 5. Breaking Changes
```markdown
## Breaking Changes

[列出所有破坏性变更，如果没有则写"无"]
```

### 6. 风险等级
```markdown
## 风险等级

**[高/中/低]**：
- [风险点说明]
- [影响范围描述]
```

## 内容编写规范

### 变更类型分类
- **修复问题**：Bug修复（需要添加 Bug 特征和排查规则）
- **性能优化**：性能提升相关（可添加性能问题特征）
- **新增功能**：新的功能特性
- **样式调整**：UI/样式相关变更（通常不需要特征分析）
- **重构**：代码重构但不影响功能
- **文档更新**：文档相关更新

### 变更标签
如果需要，可以有多个标签
- **功能**：功能完全失效、部分失效等相关的变更
- **传参**：API 在出入参上有变化，如：参数增加、减少、调整内容、结构变化
- **样式**：字色、字号、背景色等不影响排版的样式变更
- **布局**：内外边距、弹性布局、定位、高度、宽度等会影响排版的样式变更
- **时机**：组件触发回调、内部执行逻辑等顺序有调整的变更
- **数据**：对组件处理数据造成影响的变更
- **逻辑**：对组件在数据驱动的行为上有影响的变更
- **性能**：性能改善的变更
- **交互**：对组件的操作有影响的变更，如：点击、输入、聚焦、失焦、键盘按下/弹起、光标、弹层/菜单/遮罩 的关闭或打开等
- **行为**：对组件执行某项操作后的事件有影响的变更，如：事件冒泡、事件触达等

### 风险等级评估标准
- **高**：
  - 影响核心功能或可能导致现有代码报错
  - 包含多个回归问题修复
  - 大范围影响组件行为
- **中**：
  - 包含回归问题修复
  - 影响特定属性组合的使用
  - 性能优化可能改变渲染时机
- **低**：
  - 仅样式调整
  - 修复特定边缘场景问题
  - 增加容错处理

### Bug 特征描述要求
1. 仅在「修复问题」类型的变更中添加此部分
2. Bug 特征要具体明确，避免模糊描述
3. 代码模式要突出容易出问题的属性组合
4. 排查规则要可通过代码搜索实现
5. 避免依赖动态数据的判断（如「文本较长」等）

### 版本号格式
- 正式版本：`3.x.x`
- Beta版本：`3.x.x-beta.n`
- 版本范围：使用 `~` 连接，如 `3.6.1-beta.1 ~ 3.6.1-beta.7`

### 日期格式
统一使用 ISO 8601 格式：`YYYY-MM-DD`

### 链接格式
- **PR链接**: `[#PR编号](https://github.com/sheinsight/shineout-next/pull/PR编号)`
- **复现示例**: `https://shineout-playground.sheincorp.cn/#/playground?code=[短链接]`

### 排查规则编写原则
1. 使用「搜索」而非「查」作为动词
2. 描述具体的属性组合或代码模式
3. 避免依赖运行时数据的判断
4. 提供可通过静态分析识别的规则